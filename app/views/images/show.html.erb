
<div id="show-image-container">
  <img src=<%= "#{@image.img}" %>>

  <!-- favorite -->
  <%= button_to "", image_favorite_path(@image), :remote => true, :id => "fav", 
        :hidden => @favorited %>

  <!-- unfavorite -->
  <%= button_to "", image_favorite_path(@image), :method => :delete, 
        :remote => true, :id => "unfav", :hidden => (not @favorited) %>


  <% if @image.user_id == current_user.id %>
    <%= link_to image_tag("recycle_icon.png", :height => 25, :width => 25, 
            :class => "delete-icon"), image_path(@image), :method => :delete %>
    <%= link_to "Edit this doodle", edit_image_path(@image) %>
    <div class="contribute-container">
      <% if @contributed_users.length > 0 %>
        <div class="contributor-names">
          contributors: <%= render :partial => 'contributors_list.html.erb', 
            :collection => @contributed_users, :as => :user %>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="contribute-container">
      <%= link_to "Contribute to this doodle", edit_image_path(@image) %>
      <div class="artist-names">
        by <%= link_to @image.user.email, user_path(@image.user) %>
      </div>
      <% if @contributed_users.length > 0 %>
        <div class="contributor-names">
          contributors: <%= render :partial => 'contributors_list.html.erb', 
              :collection => @contributed_users, :as => :user %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>


<script type="text/javascript">
  $(function () {
    $('.button_to').on('ajax:success', function () {
      console.log("yay");
      $('#fav, #unfav').toggle();
    });
  });
</script>


